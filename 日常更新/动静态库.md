#  动静态库

##  制作可以发布的静态库

![image-20230923170617678](E:\markdown\图片\image-20230923170617678.png)

![image-20230923170739402](E:\markdown\图片\image-20230923170739402.png)

##  制作动态库

![image-20230923172442192](E:\markdown\图片\image-20230923172442192.png)

![image-20230923172427224](E:\markdown\图片\image-20230923172427224.png)

##  如何使用.a和.so

系统安装软件本质就是copy

![image-20230923175710146](E:\markdown\图片\image-20230923175710146.png)

###  第一种方法(不推荐) 

1.先要头文件包含库文件

2.把这个库拷贝到系统的库文件所放在的地方（也叫做**库的安装**）

3.**gcc -l + 库名就可以使用第三方库了。**

###  第二种方法

使用以下命令可以使用动态库

![image-20230923175729261](E:\markdown\图片\image-20230923175729261.png)

##  动态库的运行

虽然这样可以得到可执行程序了。但是./mytest还是找不到动态库。

![image-20230923180233556](E:\markdown\图片\image-20230923180233556.png)

![image-20230923180710626](E:\markdown\图片\image-20230923180710626.png)

在这里面较简单的事第三种方式：**用系统配置文件来做。**

还有一个更简单的方法。

 **就是建立一个软连接！**

![image-20230923182048879](E:\markdown\图片\image-20230923182048879.png)

##  动态库执行原理

堆栈之间的区域叫做共享区，也就是动态库.so存在的区域。

![image-20230923183031762](E:\markdown\图片\image-20230923183031762.png)

每个进程都有自己的地址空间，通过页表进行映射，都可以在自己的虚拟进程地址空间中执行这个代码。

但是实际这个库在磁盘上只有一份。

